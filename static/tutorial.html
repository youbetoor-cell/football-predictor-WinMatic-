<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>WinMatic – Tutorial</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      color-scheme: dark;
      --bg: #020617;
      --border-subtle: #111827;
      --accent-purple: #8b5cf6;
      --accent-green: #22c55e;
      --accent-blue: #38bdf8;
      --text: #e5e7eb;
      --text-soft: #9ca3af;
      --text-softer: #6b7280;
      --radius-lg: 24px;
      --radius-md: 18px;
      --shadow-soft: 0 24px 70px rgba(0, 0, 0, 0.85);
      --shadow-card: 0 18px 50px rgba(15, 23, 42, 0.98);
    }

    * { box-sizing: border-box; }

    html, body {
      margin: 0;
      padding: 0;
      scroll-behavior: smooth;
    }

    body {
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background:
        radial-gradient(circle at top left, #2a145a 0, #05051b 40%, #020617 100%);
      color: var(--text);
      display: flex;
      flex-direction: column;
      transition: background 0.5s ease;
    }

    /* TOP BAR (shared across pages) */
.topbar-hover-zone {
  /* invisible strip at very top – desktop only */
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 16px;
  z-index: 40;
}

.topbar {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 50;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 22px;
  background: rgba(2, 6, 23, 0.96);
  border-bottom: 1px solid rgba(15, 23, 42, 0.9);
  backdrop-filter: blur(18px);
}

.topbar-left {
  display: flex;
  align-items: center;
  gap: 10px;
}

.topbar-right {
  display: flex;
  align-items: center;
  gap: 8px;
}

/* Brand */
.brand {
  display: flex;
  align-items: center;
  gap: 8px;
  text-decoration: none;
  color: inherit;
}

.brand-logo {
  width: 36px;
  height: 36px;
  border-radius: 9999px;
  background: radial-gradient(circle at 20% 10%, #a855f7, #6366f1 40%, #22c55e 95%);
  box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.9), 0 0 40px rgba(129, 140, 248, 0.9);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  font-size: 1.1rem;
  color: #f9fafb;
}

.brand-name {
  font-weight: 800;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  font-size: 0.9rem;
}

.brand-tagline {
  font-size: 0.75rem;
  color: var(--text-soft);
}

/* Nav links */
.nav {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-top: 0;
  opacity: 0;
  transform: translateY(-4px);
  pointer-events: none;
  transition: opacity 0.18s ease, transform 0.18s ease;
}

/* Show nav links when you hover at the very top or on the bar itself */
.topbar-hover-zone:hover + .topbar .nav,
.topbar:hover .nav {
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}

.nav-item {
  border-radius: 9999px;
  padding: 6px 11px;
  font-size: 0.82rem;
  color: var(--text-soft);
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  border: 1px solid transparent;
  transition: 0.18s;
  position: relative;
  text-decoration: none;
}

.nav-item::before {
  content: "●";
  font-size: 0.5rem;
  opacity: 0.7;
}

.nav-item:hover {
  background: #061126;
  color: var(--text);
  border-color: #111827;
  transform: translateY(-1px);
}

/* Glowing active pill */
.nav-item.active {
  background: rgba(139, 92, 246, 0.18);
  border-color: rgba(139, 92, 246, 0.8);
  color: #ddd6fe;
  box-shadow: 0 0 18px rgba(139, 92, 246, 0.8);
}

/* Mobile: keep bar slim and nav in a single scrollable row */
@media (max-width: 860px) {
  /* hover strip not needed on mobile */
  .topbar-hover-zone {
    display: none;
  }

  /* keep bar fixed and add padding for it */
  body {
    padding-top: 54px;
  }

  .topbar {
    padding: 8px 12px;
  }

  /* tagline visible on mobile */
  .brand-tagline {
    display: block;
  }

  /* nav always visible on mobile */
  .nav {
    flex-wrap: nowrap;
    overflow-x: auto;
    white-space: nowrap;
    max-width: 100%;
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
  }

  .nav::-webkit-scrollbar {
    display: none;
  }

  .nav-item {
    font-size: 0.78rem;
    padding: 5px 9px;
  }
}


    /* MAIN */
    .main {
      flex:1;
      padding:18px 22px 26px;
      position:relative;
      max-width: 1100px;
      width: 100%;
      margin: 0 auto;
    }

    /* HERO */
    .hero {
      position:relative;
      margin-bottom:24px;
      border-radius:var(--radius-lg);
      padding:24px 24px 22px;
      border:1px solid rgba(15,23,42,.9);
      background:
        radial-gradient(circle at top left, rgba(139,92,246,.38), transparent 62%),
        radial-gradient(circle at center right, rgba(34,197,94,.25), transparent 60%),
        #020617;
      box-shadow:var(--shadow-soft);
      overflow:hidden;
    }

    .hero-content {
      position:relative;
      display:flex;
      justify-content:space-between;
      gap:20px;
      align-items:flex-start;
      flex-wrap:wrap;
    }

    .hero-left { max-width:620px; }

    .eyebrow {
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:3px 10px;
      border-radius:9999px;
      background:rgba(15,23,42,.9);
      border:1px solid rgba(148,163,184,.3);
      font-size:.72rem;
      color:var(--text-soft);
      margin-bottom:8px;
    }

    .eyebrow-dot {
      width:7px;
      height:7px;
      border-radius:9999px;
      background:#22c55e;
      box-shadow:0 0 12px rgba(34,197,94,1);
    }

    .hero-title {
      font-size:2rem;
      font-weight:800;
      letter-spacing:.02em;
      margin:0 0 8px;
    }

    .hero-highlight { color:#c4b5fd; }

    .hero-subtitle {
      font-size:.94rem;
      color:var(--text-soft);
      max-width:560px;
      line-height:1.5;
    }

    .hero-buttons {
      margin-top:12px;
      display:flex;
      flex-wrap:wrap;
      gap:8px;
    }

    .btn {
      border-radius:9999px;
      padding:7px 15px;
      border:none;
      cursor:pointer;
      font-size:.88rem;
      display:inline-flex;
      align-items:center;
      gap:6px;
      transition:.18s;
      text-decoration:none;
    }

    .btn-primary {
      background:linear-gradient(135deg, #6366f1, #22c55e);
      color:#f9fafb;
      box-shadow:0 0 26px rgba(129,140,248,.9);
    }

    .btn-primary:hover {
      transform:translateY(-1px);
      box-shadow:0 0 34px rgba(94,234,212,.9);
    }

    .btn-secondary {
      background:rgba(15,23,42,.95);
      color:var(--text-soft);
      border:1px solid rgba(148,163,184,.4);
    }

    .btn-secondary:hover {
      background:rgba(15,23,42,1);
      color:var(--text);
    }

    .hero-right {
      min-width:220px;
      max-width:260px;
      border-radius:var(--radius-md);
      border:1px solid rgba(148,163,184,.5);
      padding:10px 13px;
      background: radial-gradient(circle at top left, rgba(15,23,42,.9), #020617);
      box-shadow:0 12px 30px rgba(15,23,42,1);
      font-size:.78rem;
    }

    .hero-right-title { font-weight:600; margin-bottom:6px; }

    .hero-right-row {
      display:flex;
      justify-content:space-between;
      margin-top:4px;
    }

    .hero-right-label { color:var(--text-softer); }
    .hero-right-value { font-weight:600; color:#bbf7d0; }

    /* TUTORIAL SECTIONS */
    .tutorial-sections {
      margin-top:20px;
      display:flex;
      flex-direction:column;
      gap:18px;
    }

    .tutorial-section {
      border-radius:var(--radius-md);
      padding:16px 18px 14px;
      border:1px solid rgba(15,23,42,1);
      background:radial-gradient(circle at top left, rgba(15,23,42,.96), #020617);
      box-shadow:var(--shadow-card);
      font-size:.86rem;
    }

    .tutorial-section h2 {
      font-size:1rem;
      font-weight:600;
      margin:0 0 8px;
    }

    .tutorial-section p {
      margin:4px 0 8px;
      color:var(--text-soft);
      line-height:1.5;
    }

    .tutorial-section strong {
      color:#e5e7eb;
    }

    .step-grid {
      display:grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap:12px;
      margin-top:10px;
    }

    @media (max-width: 980px) {
      .step-grid {
        grid-template-columns: minmax(0,1fr);
      }
    }

    .step-card {
      border-radius:16px;
      padding:12px 13px 10px;
      border:1px solid rgba(15,23,42,1);
      background:radial-gradient(circle at top, #020617, #020617 60%);
      box-shadow:0 12px 30px rgba(15,23,42,1);
      position:relative;
      overflow:hidden;
    }

    .step-number {
      font-size:.75rem;
      text-transform:uppercase;
      letter-spacing:.16em;
      color:var(--text-softer);
      margin-bottom:4px;
    }

    .step-title {
      font-size:.9rem;
      font-weight:600;
      margin-bottom:4px;
    }

    .step-text {
      font-size:.8rem;
      color:var(--text-soft);
      line-height:1.5;
    }

    .step-tag {
      position:absolute;
      top:10px;
      right:10px;
      font-size:.7rem;
      padding:2px 7px;
      border-radius:9999px;
      border:1px solid rgba(148,163,184,.45);
      background:rgba(15,23,42,.98);
      color:var(--text-soft);
    }

    .step-tag.green {
      border-color:rgba(34,197,94,.8);
      color:#bbf7d0;
    }

    .kbd {
      display:inline-block;
      padding:1px 6px;
      border-radius:6px;
      border:1px solid #111827;
      background:rgba(15,23,42,.9);
      font-size:.75rem;
      font-family:inherit;
    }

    .tip {
      margin-top:6px;
      font-size:.78rem;
      color:var(--text-softer);
    }

    .tip strong {
      color:#bbf7d0;
    }

    .code-path {
      font-family: "SF Mono", ui-monospace, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size:.8rem;
      padding:2px 6px;
      border-radius:6px;
      background:#020617;
      border:1px solid #111827;
      color:#e5e7eb;
    }

    .list {
      margin:6px 0 2px 1rem;
      padding:0;
      color:var(--text-soft);
      font-size:.8rem;
    }

    .list li {
      margin-bottom:3px;
    }
  
/* ===== WinMatic layout hotfix (desktop + mobile) ===== */
:root{ --topbar-h:72px; --nav-w:260px; }
.app-shell{ padding-top: var(--topbar-h); min-height:100vh; }
.topbar{ height: var(--topbar-h); z-index: 1000; }
.side-nav{
  position: fixed;
  top: var(--topbar-h);
  left: 0;
  bottom: 0;
  width: var(--nav-w);
  overflow-y: auto;
  z-index: 950;
  -webkit-overflow-scrolling: touch;
}
.app-main{
  margin-left: var(--nav-w);
  min-height: calc(100vh - var(--topbar-h));
}
.nav-scrim{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.45);
  z-index: 940;
  display: none;
}
body.nav-open .nav-scrim{ display:block; }
@media (max-width: 980px){
  :root{ --nav-w: 86vw; }
  .side-nav{
    transform: translateX(-110%);
    transition: transform .18s ease;
    box-shadow: 0 10px 30px rgba(0,0,0,.45);
  }
  body.nav-open .side-nav{ transform: translateX(0); }
  .app-main{ margin-left: 0 !important; }
  .topbar{ padding-left: 12px; padding-right: 12px; }
  .nav-toggle{
    display: inline-flex !important;
    align-items:center;
    justify-content:center;
    width: 42px;
    height: 42px;
    border-radius: 12px;
    border: 1px solid rgba(255,255,255,.12);
    background: rgba(255,255,255,.06);
    cursor: pointer;
    margin-right: 10px;
  }
}
@media (min-width: 981px){
  .nav-toggle{ display:none !important; }
}

</style>
</head>
<body>
  <!-- Desktop: tiny hover strip that reveals the nav links -->
  <div class="topbar-hover-zone"></div>

  <header class="topbar">
    <div class="topbar-left">
      <a href="index.html" class="brand">
        <div class="brand-logo">W</div>
        <div>
          <div class="brand-name">WINMATIC</div>
          <div class="brand-tagline">AI Match Edge Engine</div>
        </div>
      </a>
    </div>
    <div class="topbar-right">
      <nav class="nav">
        <a href="index.html" class="nav-item">Home</a>
        <a href="predictor.html" class="nav-item">Predictions</a>
        <a href="predictor.html#today" class="nav-item">All matches (today)</a>
        <a href="value.html" class="nav-item">Value Scanner</a>
        <a href="value.html" class="nav-item">Bet of the day</a>
        <a href="metrics.html#progress" class="nav-item">Progress</a>
        <a href="metrics.html" class="nav-item">Results</a>
        <a href="metrics.html#metrics" class="nav-item">Metrics</a>
        <a href="tutorial.html" class="nav-item active">Tutorial</a>
        <a href="pricing.html" class="nav-item">View pricing</a>
        <a href="contact.html" class="nav-item">Contact</a>
      </nav>
    </div>
  </header>

  <!-- page-specific content below -->


  <main class="main">
    <!-- HERO -->
    <section class="hero">
      <div class="hero-content">
        <div class="hero-left">
          <div class="eyebrow">
            <div class="eyebrow-dot"></div>
            Step-by-step · From blank screen to live edges
          </div>
          <h1 class="hero-title">
            How to use <span class="hero-highlight">WinMatic</span> in 10 minutes.
          </h1>
          <p class="hero-subtitle">
            This page walks you through the full loop: training the model, exploring predictions,
            scanning for value bets and tracking how the engine performs over time.
          </p>
          <div class="hero-buttons">
            <a href="predictor.html" class="btn btn-primary">Jump to Predictor</a>
            <a href="/docs" class="btn btn-secondary">Open API docs (/docs)</a>
          </div>
        </div>

        <aside class="hero-right">
          <div class="hero-right-title">Quick checklist</div>
          <div class="hero-right-row">
            <span class="hero-right-label">Backend</span>
            <span class="hero-right-value">Running on :8001</span>
          </div>
          <div class="hero-right-row">
            <span class="hero-right-label">API key</span>
            <span class="hero-right-value">API_FOOTBALL_KEY ✅</span>
          </div>
          <div class="hero-right-row">
            <span class="hero-right-label">Model file</span>
            <span class="hero-right-value">artifacts/model.joblib</span>
          </div>
          <div class="hero-right-row">
            <span class="hero-right-label">History DB</span>
            <span class="hero-right-value">artifacts/history.db</span>
          </div>
        </aside>
      </div>
    </section>

    <section class="tutorial-sections">
      <!-- Section 1: Before you start -->
      <article class="tutorial-section">
        <h2>1. Before you start – make sure the engine is running</h2>
        <p>
          WinMatic is a FastAPI backend plus static pages. If the backend isn’t running, all buttons will
          show dashes (<strong>–</strong>) and empty cards.
        </p>
        <p><strong>Start the server:</strong></p>
        <ul class="list">
          <li>Open a terminal and go to your project folder:<br>
            <span class="code-path">cd /Users/mutarosi/football-predictor</span>
          </li>
          <li>Run the API using your start script:<br>
            <span class="code-path">./start.sh</span>
          </li>
          <li>Make sure the env variable is set (you already did this):<br>
            <span class="code-path">export API_FOOTBALL_KEY="your_real_key"</span>
          </li>
        </ul>
        <p>
          Then check:
          <br>
          <span class="code-path">http://127.0.0.1:8001/health</span> → should say <strong>{"status":"ok"}</strong>  
          <br>
          <span class="code-path">http://127.0.0.1:8001/docs</span> → Swagger with all endpoints
        </p>
        <p class="tip">
          <strong>Tip:</strong> Leave this terminal window open while you use the app. You’ll see useful
          logs for training, API calls and any errors.
        </p>
      </article>

      <!-- Section 2: Training -->
      <article class="tutorial-section">
        <h2>2. Train or refresh the model</h2>
        <p>
          The model uses historic fixtures + features (team strength, Elo, form, odds, etc.) and trains a
          <strong>RandomForest</strong> to predict home/away goals. From that we derive 1X2 probabilities and edge.
        </p>
        <div class="step-grid">
          <div class="step-card">
            <div class="step-number">Step 2.1</div>
            <div class="step-title">Open the training endpoint</div>
            <div class="step-text">
              Go to <span class="code-path">/docs</span> and find
              <strong>POST /train</strong> (or whatever your training endpoint shows as).  
              Click it, then click <span class="kbd">Try it out</span> → <span class="kbd">Execute</span>.
            </div>
            <div class="step-tag">Model training</div>
          </div>

          <div class="step-card">
            <div class="step-number">Step 2.2</div>
            <div class="step-title">Wait for training to finish</div>
            <div class="step-text">
              In the terminal you’ll see it fetch seasons (2018–2025), build features, and train the
              RandomForest.  
              When it’s done, you’ll typically see metrics like logloss, Brier, hit-rate vs market.
            </div>
            <div class="step-tag green">Artifacts saved</div>
          </div>

          <div class="step-card">
            <div class="step-number">Step 2.3</div>
            <div class="step-title">Check metrics page</div>
            <div class="step-text">
              Open <span class="code-path">/static/metrics.html</span>.  
              You should now see calibration curves, hit-rates and team strength charts reflecting the
              latest model.
            </div>
            <div class="step-tag">Sanity check</div>
          </div>
        </div>
        <p class="tip">
          <strong>When to retrain?</strong> For a hobby setup, retraining once a week or once every
          few matchdays is usually enough.
        </p>
      </article>

      <!-- Section 3: Using the Predictor -->
      <article class="tutorial-section">
        <h2>3. Use the Predictor – explore matches and probabilities</h2>
        <p>
          The <strong>Predictor</strong> page is where you browse upcoming fixtures, view 1X2 probabilities,
          and get a detailed reasoning panel for each match.
        </p>
        <div class="step-grid">
          <div class="step-card">
            <div class="step-number">Step 3.1</div>
            <div class="step-title">Open the page</div>
            <div class="step-text">
              Go to <span class="code-path">/static/predictor.html</span> or click
              <strong>Predictions</strong> in the top menu.  
              The app will call <span class="code-path">/predict/upcoming</span> and load today’s and upcoming
              matches.
            </div>
          </div>
          <div class="step-card">
            <div class="step-number">Step 3.2</div>
            <div class="step-title">Use date &amp; filters</div>
            <div class="step-text">
              On the left controls, choose:
              <ul class="list">
                <li>League (e.g. Premier League 39)</li>
                <li>Date or number of days ahead</li>
                <li>Minimum edge / confidence slider (if present)</li>
              </ul>
            </div>
            <div class="step-tag">Filters</div>
          </div>
          <div class="step-card">
            <div class="step-number">Step 3.3</div>
            <div class="step-title">Expand a match card</div>
            <div class="step-text">
              Click any match card. It expands to show:
              <ul class="list">
                <li>Model 1X2 probabilities</li>
                <li>Suggested side (home/draw/away)</li>
                <li>Possible scoreline range</li>
                <li>Key reasoning: form, xG-style proxies, top scorers, etc.</li>
              </ul>
            </div>
            <div class="step-tag green">Reasoning</div>
          </div>
        </div>
        <p class="tip">
          <strong>Important:</strong> Treat these as model suggestions, not automatic bets. Always check
          odds, team news, injuries and your own judgement.
        </p>
      </article>

      <!-- Section 4: Value Scanner / Bet of the Day -->
      <article class="tutorial-section">
        <h2>4. Value Scanner &amp; Bet of the day</h2>
        <p>
          The <strong>Value Scanner</strong> combines model probabilities with live bookmaker odds
          (via API-Football) to find where the model thinks the price is off.
        </p>
        <div class="step-grid">
          <div class="step-card">
            <div class="step-number">Step 4.1</div>
            <div class="step-title">Open Value Scanner</div>
            <div class="step-text">
              Go to <span class="code-path">/static/value.html</span> or click
              <strong>Value Scanner</strong> in the menu.  
              This calls <span class="code-path">/value-bets?league=39&amp;days_ahead=…</span> on the backend.
            </div>
          </div>
          <div class="step-card">
            <div class="step-number">Step 4.2</div>
            <div class="step-title">Understand the edge</div>
            <div class="step-text">
              For each candidate bet, you’ll see:
              <ul class="list">
                <li>Model probability vs implied odds probability</li>
                <li>Edge (difference) – e.g. +8% or +12%</li>
                <li>Which side the model likes (Home / Draw / Away)</li>
              </ul>
            </div>
            <div class="step-tag green">Edge</div>
          </div>
          <div class="step-card">
            <div class="step-number">Step 4.3</div>
            <div class="step-title">Bet of the day</div>
            <div class="step-text">
              The <strong>Bet of the day</strong> is simply the strongest edge for your chosen league
              &amp; day range.  
              You can treat it as “top pick”, but only if it also makes sense to you.
            </div>
            <div class="step-tag">Top pick</div>
          </div>
        </div>
        <p class="tip">
          <strong>Quota safety:</strong> Avoid spam-clicking Value Scanner. Each refresh uses several
          odds calls. Your backend already has protections, but it’s still good API hygiene.
        </p>
      </article>

      <!-- Section 5: Tracking results & improving -->
      <article class="tutorial-section">
        <h2>5. Track results &amp; improve over time</h2>
        <p>
          WinMatic logs predictions into <span class="code-path">artifacts/history.db</span>.  
          The <strong>Metrics</strong> / <strong>Results</strong> pages help you see how the model behaves
          in the wild.
        </p>
        <div class="step-grid">
          <div class="step-card">
            <div class="step-number">Step 5.1</div>
            <div class="step-title">Open Metrics / Results page</div>
            <div class="step-text">
              Go to <span class="code-path">/static/metrics.html</span> or click
              <strong>Results</strong> or <strong>Metrics</strong> in the top menu.  
              You’ll see hit-rates, calibration plots and team strength visuals.
            </div>
          </div>
          <div class="step-card">
            <div class="step-number">Step 5.2</div>
            <div class="step-title">Update actual outcomes</div>
            <div class="step-text">
              When real matches finish, you can extend the backend to fill in <strong>actual_result</strong>
              for each fixture in <span class="code-path">predictions_history</span>.  
              Then, metrics will reflect true performance.
            </div>
            <div class="step-tag">Optional dev</div>
          </div>
          <div class="step-card">
            <div class="step-number">Step 5.3</div>
            <div class="step-title">Iterate the model</div>
            <div class="step-text">
              Over time you can:
              <ul class="list">
                <li>Tweak features (form windows, xG proxies, etc.)</li>
                <li>Adjust RandomForest hyper-parameters</li>
                <li>Experiment with other models (XGBoost, neural nets)</li>
              </ul>
              Retrain, compare metrics, and keep what actually improves out-of-sample results.
            </div>
            <div class="step-tag green">Model evolution</div>
          </div>
        </div>
        <p class="tip">
          <strong>Mindset:</strong> Think of WinMatic as your lab. You’re not trying to be perfect on
          day one – you’re building a system you can improve and trust over months.
        </p>
      </article>
    </section>
  </main>
<script>
// ===== WinMatic nav hotfix =====
(function(){
  const body=document.body;
  // scrim
  let scrim=document.querySelector('.nav-scrim');
  if(!scrim){
    scrim=document.createElement('div');
    scrim.className='nav-scrim';
    document.body.appendChild(scrim);
  }
  scrim.addEventListener('click', ()=> body.classList.remove('nav-open'));

  // add toggle button if missing
  const topbar=document.querySelector('.topbar .left') || document.querySelector('.topbar') || document.querySelector('header');
  if(topbar && !document.querySelector('.nav-toggle')){
    const btn=document.createElement('button');
    btn.className='nav-toggle';
    btn.type='button';
    btn.setAttribute('aria-label','Toggle menu');
    btn.innerHTML='☰';
    btn.addEventListener('click', ()=> body.classList.toggle('nav-open'));
    // put it at the very start of the left cluster if possible
    if(topbar.classList.contains('left')) topbar.prepend(btn);
    else topbar.prepend(btn);
  }
  // close nav when a link is clicked (mobile)
  document.addEventListener('click', (e)=>{
    const a = e.target && e.target.closest ? e.target.closest('a') : null;
    if(a && a.closest && a.closest('.side-nav') && window.matchMedia('(max-width: 980px)').matches){
      body.classList.remove('nav-open');
    }
  });
})();
</script>
</body>
</html>
